/* Auto-generated lookup table generator from glibc's wcwidth results */

// ---------- Build widths array ----------
const MAX_CP = 0x10FFFF;
const widths = new Uint8Array(MAX_CP + 1);

// Start with everything as non-printable
widths.fill(0xFF);

const cp0 = [0,1471,1479,1564,1648,1809,2045,2362,2364,2381,2433,2492,2509,2558,2620,2641,2677,2748,2765,2817,2876,2879,2893,2946,3008,3021,3072,3076,3132,3201,3260,3263,3270,3405,3457,3530,3542,3633,3761,3893,3895,3897,4038,4226,4237,4253,6086,6109,6313,6450,6683,6742,6752,6754,6783,6964,6972,6978,7142,7149,7405,7412,11647,12644,43010,43014,43019,43052,43263,43443,43493,43587,43596,43644,43696,43713,43766,44005,44008,44013,64286,65279,65440,66045,66272,68159,69633,69744,69826,70003,70095,70196,70206,70209,70367,70464,70606,70608,70610,70726,70750,70842,71229,71339,71341,71351,71453,71455,71998,72003,72160,72263,72767,73018,73031,73109,73111,73536,73538,73562,78912,94031,94180,121461,121476,123023,123566,917505];
const cp1 = [908,1470,1472,1475,1478,1563,1769,1969,2074,2084,2088,2142,2274,2363,2482,2510,2519,2563,2654,2678,2691,2761,2768,2809,2880,2903,2947,2972,3024,3031,3133,3165,3517,3716,3749,3773,3782,3894,3896,3967,3973,4145,4152,4295,4301,4696,4800,5909,6070,6314,6464,6743,6753,6965,6971,7082,7143,7150,7379,7393,7418,8025,8027,8029,9972,10061,10070,11559,11565,12351,42611,42963,43359,43597,43697,43712,43714,64285,64318,64975,65952,67592,67644,67903,69293,69632,69749,69837,69932,70197,70280,70480,70487,70539,70542,70594,70597,70607,70609,70725,70749,70841,70849,71102,71230,71340,71350,71454,71462,71736,71739,71945,71997,72192,72272,72343,72766,72873,72881,72884,73030,73110,73112,73537,73648,92917,113820,113823,119365,119970,119995,120134,123647,124415,125259,126500,126503,126521,126523,126530,126535,126537,126539,126548,126551,126553,126555,126557,126559,126564,126590,127798,127869,128063,128065,128335,129339,129350];
const cp2 = [9200,9203,9855,9875,9889,9934,9940,9962,9973,9978,9981,9989,10024,10060,10062,10071,10160,10175,11088,11093,110898,110933,126980,127183,127374,127988,128064,128378,128420,128716,129008];
const range0 = [[768,879],[1155,1161],[1425,1469],[1473,1474],[1476,1477],[1552,1562],[1611,1631],[1750,1756],[1759,1764],[1767,1768],[1770,1773],[1840,1866],[1958,1968],[2027,2035],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2199,2207],[2250,2273],[2275,2306],[2369,2376],[2385,2391],[2402,2403],[2497,2500],[2530,2531],[2561,2562],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2753,2757],[2759,2760],[2786,2787],[2810,2815],[2881,2884],[2901,2902],[2914,2915],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3426,3427],[3538,3540],[3636,3642],[3655,3662],[3764,3772],[3784,3790],[3864,3865],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4229,4230],[4448,4607],[4957,4959],[5906,5908],[5938,5939],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6089,6099],[6155,6159],[6277,6278],[6432,6434],[6439,6440],[6457,6459],[6679,6680],[6744,6750],[6757,6764],[6771,6780],[6832,6862],[6912,6915],[6966,6970],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7144,7145],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7416,7417],[7616,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43045,43046],[43204,43205],[43232,43249],[43302,43309],[43335,43345],[43392,43394],[43446,43449],[43452,43453],[43561,43566],[43569,43570],[43573,43574],[43698,43700],[43703,43704],[43710,43711],[43756,43757],[55216,55238],[55243,55291],[65024,65039],[65056,65071],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68325,68326],[68900,68903],[68969,68973],[69291,69292],[69372,69375],[69446,69456],[69506,69509],[69688,69702],[69747,69748],[69759,69761],[69811,69814],[69817,69818],[69888,69890],[69927,69931],[69933,69940],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70198,70199],[70371,70378],[70400,70401],[70459,70460],[70502,70508],[70512,70516],[70587,70592],[70625,70626],[70712,70719],[70722,70724],[70835,70840],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71231,71232],[71344,71349],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[71995,71996],[72148,72151],[72154,72155],[72193,72202],[72243,72248],[72251,72254],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73020,73021],[73023,73029],[73104,73105],[73459,73460],[73472,73473],[73526,73530],[78919,78933],[90398,90409],[90413,90415],[92912,92916],[92976,92982],[94095,94098],[113821,113822],[113824,113827],[118528,118573],[118576,118598],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[124140,124143],[124398,124399],[125136,125142],[125252,125258],[917536,917631],[917760,917999]];
const range1 = [[32,126],[160,767],[880,887],[890,895],[900,906],[910,929],[931,1154],[1162,1327],[1329,1366],[1369,1418],[1421,1423],[1488,1514],[1519,1524],[1536,1551],[1565,1610],[1632,1647],[1649,1749],[1757,1758],[1765,1766],[1774,1805],[1807,1808],[1810,1839],[1869,1957],[1984,2026],[2036,2042],[2046,2069],[2096,2110],[2112,2136],[2144,2154],[2160,2190],[2192,2193],[2208,2249],[2307,2361],[2365,2368],[2377,2380],[2382,2384],[2392,2401],[2404,2432],[2434,2435],[2437,2444],[2447,2448],[2451,2472],[2474,2480],[2486,2489],[2493,2496],[2503,2504],[2507,2508],[2524,2525],[2527,2529],[2534,2557],[2565,2570],[2575,2576],[2579,2600],[2602,2608],[2610,2611],[2613,2614],[2616,2617],[2622,2624],[2649,2652],[2662,2671],[2674,2676],[2693,2701],[2703,2705],[2707,2728],[2730,2736],[2738,2739],[2741,2745],[2749,2752],[2763,2764],[2784,2785],[2790,2801],[2818,2819],[2821,2828],[2831,2832],[2835,2856],[2858,2864],[2866,2867],[2869,2873],[2877,2878],[2887,2888],[2891,2892],[2908,2909],[2911,2913],[2918,2935],[2949,2954],[2958,2960],[2962,2965],[2969,2970],[2974,2975],[2979,2980],[2984,2986],[2990,3001],[3006,3007],[3009,3010],[3014,3016],[3018,3020],[3046,3066],[3073,3075],[3077,3084],[3086,3088],[3090,3112],[3114,3129],[3137,3140],[3160,3162],[3168,3169],[3174,3183],[3191,3200],[3202,3212],[3214,3216],[3218,3240],[3242,3251],[3253,3257],[3261,3262],[3264,3268],[3271,3272],[3274,3275],[3285,3286],[3293,3294],[3296,3297],[3302,3311],[3313,3315],[3330,3340],[3342,3344],[3346,3386],[3389,3392],[3398,3400],[3402,3404],[3406,3407],[3412,3425],[3430,3455],[3458,3459],[3461,3478],[3482,3505],[3507,3515],[3520,3526],[3535,3537],[3544,3551],[3558,3567],[3570,3572],[3585,3632],[3634,3635],[3647,3654],[3663,3675],[3713,3714],[3718,3722],[3724,3747],[3751,3760],[3762,3763],[3776,3780],[3792,3801],[3804,3807],[3840,3863],[3866,3892],[3898,3911],[3913,3948],[3976,3980],[4030,4037],[4039,4044],[4046,4058],[4096,4140],[4155,4156],[4159,4183],[4186,4189],[4193,4208],[4213,4225],[4227,4228],[4231,4236],[4238,4252],[4254,4293],[4304,4351],[4608,4680],[4682,4685],[4688,4694],[4698,4701],[4704,4744],[4746,4749],[4752,4784],[4786,4789],[4792,4798],[4802,4805],[4808,4822],[4824,4880],[4882,4885],[4888,4954],[4960,4988],[4992,5017],[5024,5109],[5112,5117],[5120,5788],[5792,5880],[5888,5905],[5919,5937],[5940,5942],[5952,5969],[5984,5996],[5998,6000],[6016,6067],[6078,6085],[6087,6088],[6100,6108],[6112,6121],[6128,6137],[6144,6154],[6160,6169],[6176,6264],[6272,6276],[6279,6312],[6320,6389],[6400,6430],[6435,6438],[6441,6443],[6448,6449],[6451,6456],[6468,6509],[6512,6516],[6528,6571],[6576,6601],[6608,6618],[6622,6678],[6681,6682],[6686,6741],[6755,6756],[6765,6770],[6784,6793],[6800,6809],[6816,6829],[6916,6963],[6973,6977],[6979,6988],[6990,7018],[7028,7039],[7042,7073],[7078,7079],[7086,7141],[7146,7148],[7154,7155],[7164,7211],[7220,7221],[7227,7241],[7245,7306],[7312,7354],[7357,7367],[7401,7404],[7406,7411],[7413,7415],[7424,7615],[7680,7957],[7960,7965],[7968,8005],[8008,8013],[8016,8023],[8031,8061],[8064,8116],[8118,8132],[8134,8147],[8150,8155],[8157,8175],[8178,8180],[8182,8190],[8192,8202],[8208,8231],[8239,8287],[8304,8305],[8308,8334],[8336,8348],[8352,8384],[8448,8587],[8592,8985],[8988,9000],[9003,9192],[9197,9199],[9201,9202],[9204,9257],[9280,9290],[9312,9724],[9727,9747],[9750,9775],[9784,9799],[9812,9854],[9856,9865],[9872,9874],[9876,9888],[9890,9897],[9900,9916],[9919,9923],[9926,9933],[9935,9939],[9941,9961],[9963,9969],[9974,9977],[9979,9980],[9982,9988],[9990,9993],[9996,10023],[10025,10059],[10063,10066],[10072,10132],[10136,10159],[10161,10174],[10176,11034],[11037,11087],[11089,11092],[11094,11123],[11126,11157],[11159,11502],[11506,11507],[11513,11557],[11568,11623],[11631,11632],[11648,11670],[11680,11686],[11688,11694],[11696,11702],[11704,11710],[11712,11718],[11720,11726],[11728,11734],[11736,11742],[11776,11869],[42192,42539],[42560,42606],[42622,42653],[42656,42735],[42738,42743],[42752,42957],[42960,42961],[42965,42972],[42994,43009],[43011,43013],[43015,43018],[43020,43044],[43047,43051],[43056,43065],[43072,43127],[43136,43203],[43214,43225],[43250,43262],[43264,43301],[43310,43334],[43346,43347],[43395,43442],[43444,43445],[43450,43451],[43454,43469],[43471,43481],[43486,43492],[43494,43518],[43520,43560],[43567,43568],[43571,43572],[43584,43586],[43588,43595],[43600,43609],[43612,43643],[43645,43695],[43701,43702],[43705,43709],[43739,43755],[43758,43765],[43777,43782],[43785,43790],[43793,43798],[43808,43814],[43816,43822],[43824,43883],[43888,44004],[44006,44007],[44009,44012],[44016,44025],[57344,63743],[64256,64262],[64275,64279],[64287,64310],[64312,64316],[64320,64321],[64323,64324],[64326,64450],[64467,64911],[64914,64967],[65008,65023],[65136,65140],[65142,65276],[65377,65439],[65441,65470],[65474,65479],[65482,65487],[65490,65495],[65498,65500],[65512,65518],[65529,65533],[65536,65547],[65549,65574],[65576,65594],[65596,65597],[65599,65613],[65616,65629],[65664,65786],[65792,65794],[65799,65843],[65847,65934],[65936,65948],[66000,66044],[66176,66204],[66208,66256],[66273,66299],[66304,66339],[66349,66378],[66384,66421],[66432,66461],[66463,66499],[66504,66517],[66560,66717],[66720,66729],[66736,66771],[66776,66811],[66816,66855],[66864,66915],[66927,66938],[66940,66954],[66956,66962],[66964,66965],[66967,66977],[66979,66993],[66995,67001],[67003,67004],[67008,67059],[67072,67382],[67392,67413],[67424,67431],[67456,67461],[67463,67504],[67506,67514],[67584,67589],[67594,67637],[67639,67640],[67647,67669],[67671,67742],[67751,67759],[67808,67826],[67828,67829],[67835,67867],[67871,67897],[67968,68023],[68028,68047],[68050,68096],[68112,68115],[68117,68119],[68121,68149],[68160,68168],[68176,68184],[68192,68255],[68288,68324],[68331,68342],[68352,68405],[68409,68437],[68440,68466],[68472,68497],[68505,68508],[68521,68527],[68608,68680],[68736,68786],[68800,68850],[68858,68899],[68912,68921],[68928,68965],[68974,68997],[69006,69007],[69216,69246],[69248,69289],[69296,69297],[69314,69316],[69376,69415],[69424,69445],[69457,69465],[69488,69505],[69510,69513],[69552,69579],[69600,69622],[69634,69687],[69703,69709],[69714,69743],[69745,69746],[69762,69810],[69815,69816],[69819,69825],[69840,69864],[69872,69881],[69891,69926],[69942,69959],[69968,70002],[70004,70006],[70018,70069],[70079,70088],[70093,70094],[70096,70111],[70113,70132],[70144,70161],[70163,70190],[70194,70195],[70200,70205],[70207,70208],[70272,70278],[70282,70285],[70287,70301],[70303,70313],[70320,70366],[70368,70370],[70384,70393],[70402,70403],[70405,70412],[70415,70416],[70419,70440],[70442,70448],[70450,70451],[70453,70457],[70461,70463],[70465,70468],[70471,70472],[70475,70477],[70493,70499],[70528,70537],[70544,70581],[70583,70586],[70599,70602],[70604,70605],[70611,70613],[70615,70616],[70656,70711],[70720,70721],[70727,70747],[70751,70753],[70784,70834],[70843,70846],[70852,70855],[70864,70873],[71040,71089],[71096,71099],[71105,71131],[71168,71218],[71227,71228],[71233,71236],[71248,71257],[71264,71276],[71296,71338],[71342,71343],[71352,71353],[71360,71369],[71376,71395],[71424,71450],[71456,71457],[71472,71494],[71680,71726],[71840,71922],[71935,71942],[71948,71955],[71957,71958],[71960,71989],[71991,71992],[71999,72002],[72004,72006],[72016,72025],[72096,72103],[72106,72147],[72156,72159],[72161,72164],[72203,72242],[72249,72250],[72255,72262],[72279,72280],[72284,72329],[72346,72354],[72368,72440],[72448,72457],[72640,72673],[72688,72697],[72704,72712],[72714,72751],[72768,72773],[72784,72812],[72816,72847],[72960,72966],[72968,72969],[72971,73008],[73040,73049],[73056,73061],[73063,73064],[73066,73102],[73107,73108],[73120,73129],[73440,73458],[73461,73464],[73474,73488],[73490,73525],[73534,73535],[73539,73561],[73664,73713],[73727,74649],[74752,74862],[74864,74868],[74880,75075],[77712,77810],[77824,78911],[78913,78918],[78944,82938],[82944,83526],[90368,90397],[90410,90412],[90416,90425],[92160,92728],[92736,92766],[92768,92777],[92782,92862],[92864,92873],[92880,92909],[92928,92975],[92983,92997],[93008,93017],[93019,93025],[93027,93047],[93053,93071],[93504,93561],[93760,93850],[93952,94026],[94032,94087],[94099,94111],[113664,113770],[113776,113788],[113792,113800],[113808,113817],[117760,118009],[118016,118451],[118608,118723],[118784,119029],[119040,119078],[119081,119142],[119146,119154],[119171,119172],[119180,119209],[119214,119274],[119296,119361],[119488,119507],[119520,119539],[119671,119672],[119808,119892],[119894,119964],[119966,119967],[119973,119974],[119977,119980],[119982,119993],[119997,120003],[120005,120069],[120071,120074],[120077,120084],[120086,120092],[120094,120121],[120123,120126],[120128,120132],[120138,120144],[120146,120485],[120488,120779],[120782,121343],[121399,121402],[121453,121460],[121462,121475],[121477,121483],[122624,122654],[122661,122666],[122928,122989],[123136,123180],[123191,123197],[123200,123209],[123214,123215],[123536,123565],[123584,123627],[123632,123641],[124112,124139],[124144,124153],[124368,124397],[124400,124410],[124896,124902],[124904,124907],[124909,124910],[124912,124926],[124928,125124],[125127,125135],[125184,125251],[125264,125273],[125278,125279],[126065,126132],[126209,126269],[126464,126467],[126469,126495],[126497,126498],[126505,126514],[126516,126519],[126541,126543],[126545,126546],[126561,126562],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[126704,126705],[126976,126979],[126981,127019],[127024,127123],[127136,127150],[127153,127167],[127169,127182],[127185,127221],[127232,127373],[127375,127376],[127387,127405],[127462,127487],[127777,127788],[127892,127903],[127947,127950],[127956,127967],[127985,127987],[127989,127991],[128253,128254],[128318,128330],[128360,128377],[128379,128404],[128407,128419],[128421,128506],[128592,128639],[128710,128715],[128717,128719],[128723,128724],[128736,128746],[128752,128755],[128768,128886],[128891,128985],[129024,129035],[129040,129095],[129104,129113],[129120,129159],[129168,129197],[129200,129211],[129216,129217],[129280,129291],[129536,129619],[129632,129645],[129792,129938],[129940,130041],[983040,1048573],[1048576,1114109]];
const range2 = [[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9725,9726],[9748,9749],[9776,9783],[9800,9811],[9866,9871],[9898,9899],[9917,9918],[9924,9925],[9970,9971],[9994,9995],[10067,10069],[10133,10135],[11035,11036],[11904,11929],[11931,12019],[12032,12245],[12272,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12643],[12645,12686],[12688,12773],[12783,12830],[12832,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64109],[64112,64217],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510],[94176,94179],[94192,94193],[94208,100343],[100352,101589],[101631,101640],[110576,110579],[110581,110587],[110589,110590],[110592,110882],[110928,110930],[110948,110951],[110960,111355],[119552,119638],[119648,119670],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127992,128062],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128405,128406],[128507,128591],[128640,128709],[128720,128722],[128725,128727],[128732,128735],[128747,128748],[128756,128764],[128992,129003],[129292,129338],[129340,129349],[129351,129535],[129648,129660],[129664,129673],[129679,129734],[129742,129756],[129759,129769],[129776,129784],[131072,173791],[173824,177977],[177984,178205],[178208,183969],[183984,191456],[191472,192093],[194560,195101],[196608,201546],[201552,205743]];

for (const cp of cp0) widths[cp] = 0;
for (const cp of cp1) widths[cp] = 1;
for (const cp of cp2) widths[cp] = 2;

for (const [start, end] of range0)
  for (let cp = start; cp <= end; cp++) widths[cp] = 0;

for (const [start, end] of range1)
  for (let cp = start; cp <= end; cp++) widths[cp] = 1;

for (const [start, end] of range2)
  for (let cp = start; cp <= end; cp++) widths[cp] = 2;

// ---------- Build lookup table ----------
const SHIFT2 = 5;
const SHIFT1 = 11;
const MASK3 = (1 << SHIFT2) - 1;
const MASK2 = (1 << (SHIFT1 - SHIFT2)) - 1;
const TOP_BOUND = (0x10FFFF >> SHIFT1) + 1;

const L2Blocks: Uint32Array[] = [];
const leafBlocks: Uint8Array[] = [];

for (let i1 = 0; i1 < TOP_BOUND; i1++) {
  const L2tab = new Uint32Array(MASK2 + 1);

  for (let i2 = 0; i2 < L2tab.length; i2++) {
    const baseCp = (i1 << SHIFT1) | (i2 << SHIFT2);
    const leaf = new Uint8Array(MASK3 + 1);

    for (let i3 = 0; i3 <= MASK3; i3++) {
      const cp = baseCp + i3;
      leaf[i3] = cp <= 0x10FFFF ? widths[cp] : 0xFF;
    }

    if (baseCp <= 0x10FFFF) {
      leafBlocks.push(leaf);
      L2tab[i2] = leafBlocks.length; // temporary index
    }
  }

  L2Blocks.push(L2tab);
}

const HEADER_BYTES = 5 * 4;
const L1_BYTES = TOP_BOUND * 4;
const L2_TOTAL = L2Blocks.reduce((sum, tab) => sum + tab.length * 4, 0);
const LEAF_TOTAL = leafBlocks.length * (MASK3 + 1);
const TOTAL_BYTES = HEADER_BYTES + L1_BYTES + L2_TOTAL + LEAF_TOTAL;

const LOOKUP_TABLE = new Uint8Array(TOTAL_BYTES);
const view = new DataView(LOOKUP_TABLE.buffer);

// Header
view.setUint32(0, SHIFT1, true);
view.setUint32(4, TOP_BOUND, true);
view.setUint32(8, SHIFT2, true);
view.setUint32(12, MASK2, true);
view.setUint32(16, MASK3, true);

// Offsets
let L2ptr = HEADER_BYTES + L1_BYTES;
let LEAFptr = L2ptr + L2_TOTAL;

for (let i1 = 0; i1 < TOP_BOUND; i1++) {
  const L2tab = L2Blocks[i1];
  view.setUint32(20 + i1 * 4, L2ptr, true);

  for (let i2 = 0; i2 < L2tab.length; i2++) {
    const leafIndex = L2tab[i2];
    if (leafIndex) {
      view.setUint32(L2ptr + i2 * 4, LEAFptr, true);
      LOOKUP_TABLE.set(leafBlocks[leafIndex - 1], LEAFptr);
      LEAFptr += MASK3 + 1;
    } else {
      view.setUint32(L2ptr + i2 * 4, 0, true);
    }
  }

  L2ptr += L2tab.length * 4;
}

/**
 * Wcwidth lookup table.
 */
export const TABLE: Uint8Array = LOOKUP_TABLE;
